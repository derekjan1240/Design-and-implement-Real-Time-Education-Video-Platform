<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
	<style>
		.video{
			width: 100%;
		}
	</style>
</head>
<body onload="onloadFun(<%= page %>)" style="background: #E1EFE6;">
	<% include header %>

	<!-- 課程分類導航 -->
	<div style ="padding-left: 50px;">
		<ul class="nav nav-pills">
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/CS/1">Computer Science</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/Electronics/1">Electronics</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/History/1">History</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/Language/1">Language</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/Math/1">Math</a>
		  </li>
		  <li class="nav-item">
		    <a class="nav-link" href="http://127.0.0.1:3000/course/free/Music/1">Music</a>
		  </li>
		</ul>
		<br>
	</div>
	

	<!-- 影片清單 -->
	<div>
		<!-- 第一排 -->
		<div class="row" style="padding-left: 50px;">

		  	<div class="col-sm-3">
			    <div class="card">
			    	<video class="video" id="videoPlayerA" controls controlsList="nodownload">
					  	<source src =  type="video/mp4">
					</video>
			      	 <div class="card-body" id="cardA">
			        	
			      	</div>
			    </div>
		  	</div>

		  	<div class="col-sm-3">
			    <div class="card">
			    	<video class="video" id="videoPlayerB" controls controlsList="nodownload">
					  	<source  type="video/mp4">
					</video>
			      	<div class="card-body" id="cardB">
			        	
			      	</div>
			    </div>
		  	</div>

		  	<div class="col-sm-3">
		    	<div class="card">
		    		<video class="video" id="videoPlayerC" controls controlsList="nodownload">
					  	<source  type="video/mp4">
					</video>
		      		<div class="card-body" id="cardC">
			        	
			      	</div>
		    </div>
		  </div>
		</div>
		<!-- 第二排 -->
		<div class="row" style="padding-left: 50px; padding-top: 50px;">

		  	<div class="col-sm-3">
		    	<div class="card">
		    		<video class="video" id="videoPlayerD" controls controlsList="nodownload">
						<source  type="video/mp4">
					</video>
		      		<div class="card-body" id="cardD">
			        	
			      	</div>
		    </div>
		  </div>

		  	<div class="col-sm-3">
			    <div class="card">
			    	<video class="video" id="videoPlayerE" controls controlsList="nodownload">
						<source  type="video/mp4">
					</video>
			      	<div class="card-body" id="cardE">
			        	
			      	</div>
			    </div>
		  	</div>

		  	<div class="col-sm-3">
			    <div class="card">
			    	<video class="video" id="videoPlayerF" controls controlsList="nodownload">
						<source  type="video/mp4">
					</video>
			      	<div class="card-body" id="cardF">
			        	
			      	</div>
			    </div>
		  	</div>
		</div>
	</div>

	<!-- 頁碼欄 -->
	<div style= "text-align:center; padding-top: 20px;">
		<nav aria-label="Page navigation example">
		  <ul class="pagination">
		    <li class="page-item">
		      <a class="page-link" onclick="lastPageFun(<%= page %>,3)" aria-label="Previous">
		        <span aria-hidden="true">&laquo;</span>
		        <span class="sr-only">Previous</span>
		      </a>
		    </li>
		    <li class="page-item">
		      <a class="page-link" onclick="lastPageFun(<%= page %>,1)" aria-label="Previous">
		        <span aria-hidden="true">&lt;</span>
		        <span class="sr-only">Previous</span>
		      </a>
		    </li>
		    <li class="page-item"><a id='firstBtn' class="page-link" onclick="pageFun(1, <%= page %>)" >1</a></li>
		    <li class="page-item"><a id='secondBtn' class="page-link" onclick="pageFun(2, <%= page %>)" >2</a></li>
		    <li class="page-item"><a id='thirdBtn' class="page-link" onclick="pageFun(3, <%= page %>)" >3</a></li>
		    <li class="page-item">
		      <a class="page-link" onclick="nextPageFun(<%= page %>,1)" aria-label="Next">
		        <span aria-hidden="true">&gt;</span>
		        <span class="sr-only">Next</span>
		      </a>
		    </li>
		    <li class="page-item">
		      <a class="page-link" onclick="nextPageFun(<%= page %>,3)" aria-label="Next">
		        <span aria-hidden="true">&raquo;</span>
		        <span class="sr-only">Next</span>
		      </a>
		    </li>
		  </ul>
		</nav>
	</div>
	
</body>

<script type="text/javascript">

	function onloadFun(page){

		let pageCount = Math.ceil(page/3);

		let btnOne = document.getElementById("firstBtn"),
			btnTwo = document.getElementById("secondBtn"),
			btnThree = document.getElementById("thirdBtn");

		let videoA = document.getElementById("videoPlayerA"),
			videoB = document.getElementById("videoPlayerB"),
			videoC = document.getElementById("videoPlayerC"),
			videoD = document.getElementById("videoPlayerD"),
			videoE = document.getElementById("videoPlayerE"),
			videoF = document.getElementById("videoPlayerF"),

			cardA = document.getElementById("cardA"),
			cardB = document.getElementById("cardB"),
			cardC = document.getElementById("cardC"),
			cardD = document.getElementById("cardD"),
			cardE = document.getElementById("cardE"),
			cardF = document.getElementById("cardF");

			let cardName, paragram, link, msg;


		//影片說明、路徑、名稱
		<% let count = 0; %>
		<% for(let i=(6*(page-1)+1); i<= courseList.length; i++){ %>
  			<% count++; %>

  			<% if(i%6===1){ %>
  				console.log('test',<%=i%>)
  				videoA.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';	
		        cardA.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>
  			<% if(i%6===2){ %>
  				videoB.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';
  				cardB.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>
  			<% if(i%6===3){ %>
  				videoC.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';
  				cardC.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>
  			<% if(i%6===4){ %>
  				videoD.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';
  				cardD.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>
  			<% if(i%6===5){ %>
  				videoE.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';
  				cardE.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>
  			<% if(i%6===0){ %>
  				videoF.src = 'http://127.0.0.1:3000/video/<%= courseList[i-1].courseName %>/1';
  				cardF.innerHTML = '<h5 class="card-title"><%= courseList[i-1].courseName %></h5>' +
		        				  '<p class="card-text"><%= courseList[i-1].courseAbout %></h5>' +
		        				  '<br>' + '<br>'  + '<a href="/course/<%= courseList[i-1].courseName %>/1" class="btn btn-primary">View Course</a>'
  			<% } %>

  			<% if(count>=6){ %>
  				<% break; %>
  			<% } %>
  			
		<% } %>
		   

		//頁碼按鈕 
		btnOne.innerHTML = 3*(pageCount-1)+1;
		btnTwo.innerHTML = 3*(pageCount-1)+2;
		btnThree.innerHTML = 3*(pageCount-1)+3;

		if(page>12){
			window.location = "/free/<%= courseList[0].courseType %>/12";
		}else if(page<1){
			window.location = "/free/<%= courseList[0].courseType %>/1";
		}

	}


	//page fun -----------------------------------------------
    function pageFun(num,page){

    	let pageCount = Math.ceil(page/3);

    	let btnOne = document.getElementById("firstBtn"),
			btnTwo = document.getElementById("secondBtn"),
			btnThree = document.getElementById("thirdBtn");

			if(page>12){
				window.location = "/course/free/<%= courseList[0].courseType %>/12";
			}else if(page<1){
				window.location = "/course/free/<%= courseList[0].courseType %>/1";
			}else{
				window.location = "/course/free/<%= courseList[0].courseType %>/" + (3*(pageCount-1)+num).toString();
			}
    	
    }

    function nextPageFun(page,num){

    	if(page<10){
    		window.location = "/course/free/<%= courseList[0].courseType %>/" + (page+num).toString();
    	}else{
    		window.location = "/course/free/<%= courseList[0].courseType %>/12";
    	}
    	
    }

    function lastPageFun(page,num){
    	if(page>1){
    		window.location = "/course/free/<%= courseList[0].courseType %>/" + (page-num).toString();
    	}else{
    		window.location = "/course/free/<%= courseList[0].courseType %>/1"
    	}
    }

</script>

</html>